# åŒ»ç–—çŸ¥è¯†å›¾è°±åˆ†æå¹³å°

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäºPythonçš„åŒ»ç–—çŸ¥è¯†å›¾è°±åˆ†æå¹³å°ã€‚å®ƒå¯¹åŒ»ç–—é¢†åŸŸçš„å®ä½“å’Œå…³ç³»æ•°æ®è¿›è¡Œæ·±å…¥çš„å›¾åˆ†æã€‚å¹³å°å®ç°äº†å¤šç§ç»å…¸çš„å›¾ç®—æ³•ï¼ŒåŒ…æ‹¬ **åŸºç¡€å›¾åˆ†æ**ã€**PageRank**ã€**HITS** å’Œ **Louvainç¤¾åŒºå‘ç°** å’Œ **Node2Vec åµŒå…¥åˆ†æ**ã€‚æ—¨åœ¨ä»å¤æ‚çš„çŸ¥è¯†ç½‘ç»œä¸­æå–æœ‰ä»·å€¼çš„ä¸šåŠ¡æ´å¯Ÿã€‚

## ğŸ“š æ•°æ®è¯´æ˜

- è§„æ¨¡ï¼šçº¦ 4.4 ä¸‡ä¸ªå®ä½“ï¼ˆèŠ‚ç‚¹ï¼‰ã€çº¦ 30 ä¸‡æ¡å…³ç³»ï¼ˆè¾¹ï¼‰ã€‚
- å®ä½“ç±»åˆ«ï¼ˆ7 ç±»ï¼‰ï¼š
  - ç–¾ç—…ï¼ˆDisease / Diseasesï¼‰
  - è¯å“ï¼ˆDrugï¼‰
  - é£Ÿç‰©ï¼ˆFoodï¼‰
  - æ£€æŸ¥ï¼ˆCheckï¼‰
  - ç§‘å®¤ï¼ˆDepartmentï¼‰
  - è¯å“å‚å•†ï¼ˆProducerï¼‰
  - ç—‡çŠ¶ï¼ˆSymptom / Symptomsï¼‰
- å…³ç³»ç±»å‹ï¼ˆå«ç«¯ç‚¹ä¸æ ‡è¯†ï¼‰ï¼š
  - ç–¾ç—…â€”å¿Œåƒé£Ÿç‰©ï¼š(Disease, Food) â†’ `no_eat`
  - ç–¾ç—…â€”å®œåƒé£Ÿç‰©ï¼š(Disease, Food) â†’ `do_eat`
  - ç–¾ç—…â€”æ¨èåƒé£Ÿç‰©ï¼š(Disease, Food) â†’ `recommand_eat`
  - ç–¾ç—…â€”é€šç”¨è¯å“ï¼š(Disease, Drug) â†’ `common_drug`
  - ç–¾ç—…â€”çƒ­é—¨è¯å“ï¼š(Disease, Drug) â†’ `recommand_drug`
  - ç–¾ç—…â€”æ£€æŸ¥ï¼š(Disease, Check) â†’ `need_check`
  - ç–¾ç—…â€”ç—‡çŠ¶ï¼š(Disease, Symptom) â†’ `has_symptom`
  - ç–¾ç—…â€”å¹¶å‘ï¼š(Disease, Disease) â†’ `acompany_with`
  - ç–¾ç—…â€”æ‰€å±ç§‘å®¤ï¼š(Disease, Department) â†’ `belongs_to`
  - å‚å•†â€”ç”Ÿäº§è¯ç‰©ï¼š(Producer, Drug) â†’ `drugs_of`
  - ç§‘å®¤â€”ç§‘å®¤ï¼š(Department, Department) â†’ `belongs_to`

> æ³¨ï¼šå­˜åœ¨å¤šå¯¹ä¸€/å¤šå¯¹å¤šçš„å…³ç³»ï¼Œåˆ†ææ—¶ä¼šæŒ‰ä¸Šè¿° `rel_type` è¿›è¡ŒåŒºåˆ†ä¸ç»Ÿè®¡ã€‚

## ğŸ—‚ æ•°æ®æ–‡ä»¶æ ¼å¼

æ•°æ®ä½äº `data/` ç›®å½•ä¸‹ï¼ŒåŒ…å«ä¸¤ä¸ª CSV æ–‡ä»¶ï¼š

- `nodes.csv`ï¼ˆèŠ‚ç‚¹è¡¨ï¼‰å­—æ®µï¼š
  - `node_id`ï¼šèŠ‚ç‚¹å”¯ä¸€æ ‡è¯†ï¼ˆæ•´æ•°ï¼‰
  - `name`ï¼šèŠ‚ç‚¹ä¸­æ–‡åç§°
  - `type`ï¼šèŠ‚ç‚¹ç±»å‹ï¼ˆå¦‚ `Diseases`ã€`Drug` ç­‰ï¼‰
  - `other_attrs`ï¼šä»… `Diseases` èŠ‚ç‚¹å­˜åœ¨çš„ JSON å­—ç¬¦ä¸²ï¼Œå¸¸è§å­—æ®µåŒ…æ‹¬ï¼š
    - `cause`ï¼ˆç—…å› ï¼‰
    - `cure_department`ï¼ˆæ‰€å±ç§‘å®¤ï¼Œå¯èƒ½ä¸ºåˆ—è¡¨ï¼‰
    - `desc`ï¼ˆç–¾ç—…æè¿°ï¼‰
    - `prevent`ï¼ˆé¢„é˜²æªæ–½ï¼‰
    - `cured_prob`ï¼ˆæ²»æ„ˆæ¦‚ç‡ï¼‰
    - `cure_way`ï¼ˆæ²»ç–—æ–¹å¼ï¼‰
    - `cure_lasttime`ï¼ˆæ²»ç–—å‘¨æœŸï¼‰
    - `easy_get`ï¼ˆæ˜“æ„Ÿäººç¾¤ï¼‰

- `edges.csv`ï¼ˆè¾¹è¡¨ï¼‰å­—æ®µï¼š
  - `src_id`ï¼šæºèŠ‚ç‚¹ `node_id`
  - `dst_id`ï¼šç›®æ ‡èŠ‚ç‚¹ `node_id`
  - `rel_type`ï¼šå…³ç³»ç±»å‹ï¼ˆå¦‚ `no_eat`ã€`common_drug` ç­‰ï¼‰
  - `other_attrs`ï¼šå…³ç³»ä¸­æ–‡ä¿¡æ¯çš„ JSON å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ `{ "name": "æ¨èé£Ÿè°±" }`

> æç¤ºï¼šåˆ†ææ¨¡å—ä¼šè‡ªåŠ¨è¯†åˆ«ä¸Šè¿°å­—æ®µï¼›è¯·å‹¿ä¿®æ”¹åŸå§‹æ•°æ®æ–‡ä»¶çš„åˆ—åä¸å«ä¹‰ã€‚

## âœ¨ ä¸»è¦åŠŸèƒ½

- **åŸºç¡€å›¾åˆ†æ**: è®¡ç®—èŠ‚ç‚¹çš„åº¦ã€å…¥åº¦ã€å‡ºåº¦ï¼Œå¹¶åˆ†æå…¶åˆ†å¸ƒç‰¹å¾ï¼Œè¯†åˆ«ç½‘ç»œçš„å®è§‚ç»“æ„ï¼ˆå¦‚æ— æ ‡åº¦ç½‘ç»œç‰¹æ€§ï¼‰ã€‚
- **PageRank åˆ†æ**: è¯„ä¼°ç½‘ç»œä¸­æ¯ä¸ªèŠ‚ç‚¹çš„â€œå…¨å±€é‡è¦æ€§â€ï¼Œè¯†åˆ«å‡ºæ•´ä¸ªçŸ¥è¯†ä½“ç³»ä¸­çš„æ ¸å¿ƒæ¦‚å¿µã€‚
- **HITS åˆ†æ**: åŒºåˆ†èŠ‚ç‚¹çš„â€œæƒå¨æ€§â€ï¼ˆAuthorityï¼‰å’Œâ€œæ¢çº½æ€§â€ï¼ˆHubï¼‰ï¼Œè¯†åˆ«å‡ºé«˜è´¨é‡ä¿¡æ¯çš„æä¾›è€…å’Œä¼˜è´¨ä¿¡æ¯çš„èšåˆè€…ã€‚
- **Louvain ç¤¾åŒºå‘ç°**: å¯¹å›¾è¿›è¡Œç¤¾åŒºåˆ’åˆ†ï¼Œè¯†åˆ«å‡ºåŠŸèƒ½ä¸Šæˆ–è¯­ä¹‰ä¸Šé«˜åº¦ç›¸å…³çš„èŠ‚ç‚¹é›†ç¾¤ï¼Œå¹¶åˆ†æå…¶å†…éƒ¨ç»“æ„å’Œä¸šåŠ¡å«ä¹‰ã€‚
- **Node2Vec åµŒå…¥åˆ†æ**: åŸºäº igraph éšæœºæ¸¸èµ°ä¸ gensim Word2Vec ç”ŸæˆèŠ‚ç‚¹åµŒå…¥ï¼›
  - KMeans èšç±» + UMAP/tâ€‘SNE äºŒç»´æŠ•å½±ï¼›
  - Louvainâ€“KMeans å¯¹é½çƒ­åŠ›å›¾ï¼ˆéªŒè¯è¯­ä¹‰ä¸€è‡´æ€§ï¼‰ï¼›
  - å åŠ  PageRank é«˜äº®ä¸ HITSï¼ˆAuthority/Hubï¼‰æ ‡ç­¾ï¼Œå®šä½é”šç‚¹å®ä½“ã€‚
- **è‡ªåŠ¨åŒ–æŠ¥å‘Šç”Ÿæˆ**: æ¯ä¸ªåˆ†ææ¨¡å—éƒ½èƒ½è‡ªåŠ¨ç”Ÿæˆè¯¦ç»†çš„ Markdown åˆ†ææŠ¥å‘Šå’Œé…å¥—çš„å¯è§†åŒ–å›¾è¡¨ï¼Œä¾¿äºç†è§£å’Œåˆ†äº«ã€‚

## ğŸ“„ åˆ†ææŠ¥å‘Š

æ‚¨å¯ä»¥ç›´æ¥ç‚¹å‡»ä»¥ä¸‹é“¾æ¥æŸ¥çœ‹å„ä¸ªæ¨¡å—ç”Ÿæˆçš„æœ€æ–°åˆ†ææŠ¥å‘Šï¼š

- [**åŸºç¡€å›¾åˆ†ææŠ¥å‘Š**](./reports/graph_analysis.md)
- [**PageRank åˆ†ææŠ¥å‘Š**](./reports/pagerank_analysis.md)
- [**HITS åˆ†ææŠ¥å‘Š**](./reports/hits_analysis.md)
- [**Louvain ç¤¾åŒºå‘ç°æŠ¥å‘Š**](./reports/louvain_analysis.md)
- [**Node2Vec åµŒå…¥åˆ†ææŠ¥å‘Š**](./reports/node2vec_analysis.md)

## ğŸš€ å¦‚ä½•å¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

æœ¬é¡¹ç›®æ¨èä½¿ç”¨ `virtualenv` æˆ– `conda` åˆ›å»ºç‹¬ç«‹çš„ Python ç¯å¢ƒã€‚

```bash
# åˆ›å»ºä¸€ä¸ªæ–°çš„è™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰
python -m venv .venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# macOS / Linux
source .venv/bin/activate
# Windows
# .\.venv\Scripts\activate
```

### 2. å®‰è£…ä¾èµ–

æ‰€æœ‰å¿…éœ€çš„ Python åº“éƒ½è®°å½•åœ¨ `requirements.txt` æ–‡ä»¶ä¸­ã€‚

```bash
# ç¡®ä¿ä½ çš„è™šæ‹Ÿç¯å¢ƒå·²æ¿€æ´»
pip install -r requirements.txt
```

## ğŸ› ï¸ å¦‚ä½•ä½¿ç”¨

æ‰€æœ‰åˆ†æè„šæœ¬éƒ½ä½äº `src/` ç›®å½•ä¸‹ï¼Œå¹¶åº”ä½œä¸ºæ¨¡å—ä»é¡¹ç›®æ ¹ç›®å½•è¿è¡Œã€‚

### 1. è¿è¡ŒåŸºç¡€å›¾åˆ†æ

```bash
python -m src.graph_analysis
```

### 2. è¿è¡Œ PageRank åˆ†æ

```bash
python -m src.pagerank_analysis
```

### 3. è¿è¡Œ HITS åˆ†æ

```bash
python -m src.hits_analysis
```

### 4. è¿è¡Œ Louvain ç¤¾åŒºå‘ç°

```bash
python -m src.louvain_analysis
```

### 5. è¿è¡Œ Node2Vec åµŒå…¥åˆ†æ

```bash
# åŸºæœ¬è¿è¡Œï¼ˆå¦‚å­˜åœ¨ç¼“å­˜å°†å¤ç”¨åµŒå…¥ä»¥æé€Ÿï¼‰
python -m src.node2vec_analysis

# å¦‚éœ€å¼ºåˆ¶é‡æ–°è®­ç»ƒåµŒå…¥
python -m src.node2vec_analysis --force-embeddings

# ç¤ºä¾‹ï¼šè‡ªå®šä¹‰æ¸¸èµ°ä¸èšç±»ç½‘æ ¼ï¼ˆå¯é€‰ï¼‰
python -m src.node2vec_analysis \
  --walk-length 80 --num-walks 10 --p 0.25 --q 1.0 \
  --k-grid 6,8,10,12,14,16 --silhouette-sample-size 4000
```

## ğŸ“Š è¾“å‡ºç»“æœ

æ¯æ¬¡æˆåŠŸè¿è¡Œåˆ†æè„šæœ¬åï¼Œç›¸å…³çš„è¾“å‡ºä¼šè‡ªåŠ¨ä¿å­˜åˆ° `output/` å’Œ `reports/` ç›®å½•ä¸­ã€‚

- **åˆ†ææŠ¥å‘Š**:
  - è¯¦ç»†çš„ Markdown åˆ†ææŠ¥å‘Šä½äº `reports/` ç›®å½•ä¸‹ã€‚
  - ä¾‹å¦‚: `reports/pagerank_analysis.md`

- **å¯è§†åŒ–å›¾è¡¨**:
  - æ‰€æœ‰ç”Ÿæˆçš„å›¾è¡¨ï¼ˆPNGæ ¼å¼ï¼‰ä½äº `output/images/` ä¸‹çš„å¯¹åº”å­ç›®å½•ä¸­ã€‚
  - ä¾‹å¦‚: `output/images/pagerank/`

- **ä¸­é—´æ•°æ®**:
  - è®¡ç®—è¿‡ç¨‹ä¸­äº§ç”Ÿçš„å¾—åˆ†ã€åˆ†é…ç­‰æ•°æ®ï¼ˆCSV/JSONæ ¼å¼ï¼‰ä½äº `output/data/` ä¸‹çš„å¯¹åº”å­ç›®å½•ä¸­ã€‚
  - ä¾‹å¦‚: `output/data/pagerank/`

## ğŸ“‚ é¡¹ç›®ç»“æ„

```text
.
â”œâ”€â”€ data/                  # åŸå§‹æ•°æ® (èŠ‚ç‚¹å’Œè¾¹)
â”‚   â”œâ”€â”€ edges.csv
â”‚   â””â”€â”€ nodes.csv
â”œâ”€â”€ output/                # æ‰€æœ‰ç”Ÿæˆæ–‡ä»¶çš„æ ¹ç›®å½•
â”‚   â”œâ”€â”€ data/              # ä¸­é—´æ•°æ® (CSV, JSON)
â”‚   â””â”€â”€ images/            # å¯è§†åŒ–å›¾è¡¨ (PNG)
â”œâ”€â”€ reports/               # æœ€ç»ˆçš„ Markdown åˆ†ææŠ¥å‘Š
â”œâ”€â”€ src/                   # æºä»£ç 
â”‚   â”œâ”€â”€ data_loader.py     # æ•°æ®åŠ è½½å’Œè·¯å¾„ç®¡ç†
â”‚   â”œâ”€â”€ graph_analysis.py  # åŸºç¡€å›¾åˆ†æ
â”‚   â”œâ”€â”€ hits_analysis.py   # HITS ç®—æ³•åˆ†æ
â”‚   â”œâ”€â”€ louvain_analysis.py# Louvain ç¤¾åŒºå‘ç°
â”‚   â”œâ”€â”€ pagerank_analysis.py # PageRank ç®—æ³•åˆ†æ
â”‚   â””â”€â”€ set_chinese_plot.py# Matplotlib ä¸­æ–‡æ˜¾ç¤ºé…ç½®
â”œâ”€â”€ .venv/                 # Python è™šæ‹Ÿç¯å¢ƒ (æ¨è)
â”œâ”€â”€ LICENSE                # é¡¹ç›®è®¸å¯è¯
â”œâ”€â”€ README.md              # é¡¹ç›®è¯´æ˜æ–‡ä»¶
â””â”€â”€ requirements.txt       # Python ä¾èµ–åˆ—è¡¨
```
